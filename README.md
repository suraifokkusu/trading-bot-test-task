# Торговый бот
![Python](https://img.shields.io/badge/Python-3.8%2B-3776AB?style=flat&logo=python&logoColor=white)
![Docker](https://img.shields.io/badge/Docker-Available-2496ED?style=flat&logo=docker&logoColor=white)
![Telegram Bot](https://img.shields.io/badge/Telegram_Bot-2CA5E0?style=flat&logo=telegram&logoColor=white)

## Описание проекта
Это тестовое задание для компании "Банк идей" по разработке торгового бота в Telegram, который моделирует торговлю криптовалютами, используя открытые данные биржи Bybit на основе выбранной стратегии.

## Содержание

- [Требования](#требования)
- [Установка](#установка)
- [Настройка переменных окружения](#настройка-переменных-окружения)
- [Получение тестовых API-ключей Bybit](#получение-тестовых-api-ключей-bybit)
- [Создание Telegram-бота](#создание-telegram-бота)
- [Примечание о безопасности](#примечание-о-безопасности)
- [Запуск проекта](#запуск-проекта)
  - [Запуск через Python](#запуск-через-python)
  - [Запуск через Docker](#запуск-через-docker)
  - [Запуск через Docker Compose](#запуск-через-docker-compose)
- [Инструкция по использованию торгового бота](#инструкция-по-использованию-торгового-бота)
  - [Начало работы](#начало-работы)
  - [Основные команды бота](#основные-команды-бота)
    - [`/start`](#start)
    - [`/set_parameters`](#set_parameters)
    - [`/trade`](#trade)
    - [`/start_monitoring`](#start_monitoring)
    - [`/status`](#status)
    - [`/stop_monitoring`](#stop_monitoring)
  - [Пример сценария использования бота](#пример-сценария-использования-бота)
- [Дополнительные сведения](#дополнительные-сведения)
- [Советы по использованию бота](#советы-по-использованию-бота)

## Требования
- Python 3.8+
- Docker (если планируется запуск через контейнеры)
## Установка
1. Клонируйте репозиторий:
   ```bash
   git clone https://github.com/suraifokkusu/trading-bot-test-task.git
   ```
2. Перейдите в директорию проекта:
   ```bash
   cd trading-bot-test-task
   ```
3. Создайте виртуальное окружение и активируйте его:
   ```bash
   python -m venv trading-bot-venv
   source trading-bot-venv/bin/activate  # Для Linux/Mac
   trading-bot-venv\Scripts\activate     # Для Windows
   ```
4. Установите зависимости:
   ```bash
   pip install -r requirements.txt
   ```
## Настройка переменных окружения
Создайте файл `.env` в корневой директории проекта и добавьте в него следующие переменные:
```dotenv
API_KEY=YOUR_TEST_API_KEY
SECRET_KEY=YOUR_TEST_SECRET_KEY
EXCHANGE_URL=https://api-testnet.bybit.com
TELEGRAM_API_TOKEN=YOUR_TELEGRAM_BOT_TOKEN
INITIAL_CAPITAL=100000
GRID_STEP=10
```
**Примечание**: Замените `YOUR_TEST_API_KEY`, `YOUR_TEST_SECRET_KEY` и `YOUR_TELEGRAM_BOT_TOKEN` на ваши реальные значения.

## Получение тестовых API-ключей Bybit
1. Зарегистрируйтесь на [Bybit Testnet](https://testnet.bybit.com/).
2. Создайте API-ключи в личном кабинете.
3. Установите полученные ключи в файле `.env`.
## Создание Telegram-бота
1. В Telegram найдите **@BotFather**.
2. Создайте нового бота, следуя инструкциям.
3. Полученный токен добавьте в файл `.env`.
## Примечание о безопасности
- **Никогда не храните реальные API-ключи в коде или публичных репозиториях.**
- Файл `.env` добавлен в `.gitignore` и не попадет в систему контроля версий.

## Запуск проекта
### Запуск через Python
```bash
python src/bot/main.py
```
### Запуск через Docker
1. Соберите Docker-образ:
   ```bash
   docker build -t trading-bot .
   ```
2. Запустите контейнер:
   ```bash
   docker run --env-file .env trading-bot
   ```
### Запуск через Docker Compose
```bash
docker-compose up
```
# Инструкция по использованию торгового бота

## Начало работы

1. Запустите бота:

 ```bash
python src/bot/main.py
``` 

 Или используйте Docker:

 ```bash
docker-compose up 
```

2. Найдите вашего Telegram-бота:

 В Telegram найдите бота по имени пользователя, которое вы задали при его создании через @BotFather.

3. Начните диалог с ботом:

 Отправьте боту сообщение 
 ```bash
 /start.
 ```

## Основные команды бота

### /start

- Описание: Приветственное сообщение от бота и краткая инструкция по началу торговли.

### /set_parameters

- Описание: Позволяет настроить параметры торговой стратегии.

- Параметры для ввода:

 - Начальный капитал: сумма средств для торговли (например, 1000).

 - Шаг сетки: сумма, на которую будет совершаться каждая покупка или продажа (например, 100).

 - Процент падения цены: процент снижения цены для покупки (например, 0.1 для 0.1%).

 - Процент роста цены: процент повышения цены для продажи (например, 0.1 для 0.1%).

- Формат ввода:

  <начальный капитал> <шаг сетки> <процент падения цены> <процент роста цены> 

- Пример использования:

  /set_parameters 

 Бот попросит ввести параметры стратегии.

  ```1000 100 0.1 0.1 ```

### /trade

- Описание: Предоставляет список доступных активов для торговли и позволяет выбрать актив.

- Шаги использования:

 1. Отправьте команду:

  ```/trade```

 2. Бот отправит список доступных активов:

 ```  
 Доступные активы для торговли: BTCUSDT, ETHUSDT, XRPUSDT, LTCUSDT, ADAUSDT,
LINKUSDT, BNBUSDT, DOGEUSDT, DOTUSDT, SOLUSDT.
 Напишите название актива, чтобы выбрать его. 
```

 3. Введите название выбранного актива, например:

  ```BTCUSDT```

### /start_monitoring

- Описание: Запускает автоматический мониторинг цен выбранного актива и применяет торговую стратегию.

- Пример использования:

  ```/start_monitoring``` 

- Примечание: Перед запуском мониторинга убедитесь, что вы выбрали актив и настроили параметры стратегии.

### /status

- Описание: Показывает текущий баланс, открытые позиции и состояние стратегии.

- Пример использования:

  ```/status``` 

- Пример ответа бота:

 ```  
 Текущий баланс: 800.0

 Открытые позиции: [9500.0, 9400.0]
   ```

### /stop_monitoring

- Описание: Останавливает автоматический мониторинг цен.

- Пример использования:

  ```/stop_monitoring``` 

## Пример сценария использования бота

1. Начало работы:

  ```/start``` 

 Бот отвечает:

 ```
 Привет! Я бот, который поможет с торговлей.

 Введите команду /trade, чтобы начать торговлю.
 ```

2. Настройка параметров стратегии:

  ```/set_parameters``` 

 Бот запрашивает параметры:

 ```
 Введите параметры стратегии в формате:

 <начальный капитал> <шаг сетки> <процент падения цены> <процент роста цены>

 Например: 1000 100 0.1 0.1
 ```

 Вы вводите:
```1000 100 0.1 0.1```
 Бот подтверждает:
```
  Параметры стратегии установлены. 
```
3. Выбор актива для торговли:

  ```/trade```

 Бот отправляет список активов:

 ```
 Доступные активы для торговли: BTCUSDT, ETHUSDT, XRPUSDT, LTCUSDT, ADAUSDT, LINKUSDT, BNBUSDT, DOGEUSDT, DOTUSDT, SOLUSDT.

 Напишите название актива, чтобы выбрать его.
 ```

 Вы выбираете:
```BTCUSDT```

 Бот подтверждает:

 ```
Вы выбрали BTCUSDT.

 Введите команду /start_monitoring, чтобы начать мониторинг цен.
 ```

4. Запуск мониторинга цен:
```/start_monitoring```
 Бот сообщает:
```
Мониторинг цен запущен. Бот будет автоматически проверять цены каждые 60 секунд. 
```
5. Получение уведомлений о сделках:

 Бот автоматически отправляет сообщения при совершении покупок или продаж:

 ```
 Текущая цена BTCUSDT: 9500.0 USD

 Результат: Покупка по цене: 9500.0
 ```

 ```
 Текущая цена BTCUSDT: 9600.0 USD

 Результат: Продажа по цене: 9600.0
 ```

6. Проверка состояния стратегии:
```/status```
 Бот сообщает:

 ```
 Текущий баланс: 900.0

 Открытые позиции: [9400.0]
 ```

7. Остановка мониторинга цен:
```/stop_monitoring```
 Бот подтверждает:
```
Мониторинг цен остановлен. 
```
## Дополнительные сведения

- Капитал исчерпан:

 Если ваш оставшийся капитал становится меньше, чем размер шага сетки (grid_step), бот уведомит вас и остановит мониторинг цен.
```
  Капитал исчерпан. Мониторинг остановлен. 
```
- Изменение параметров стратегии:

 Вы можете изменить параметры стратегии в любое время, повторно выполнив команду ```/set_parameters.```

- Выбор другого актива:

 Чтобы выбрать другой актив для торговли, снова выполните команду ```/trade``` и введите название нового актива.

## Советы по использованию бота

- Тестирование стратегии: Попробуйте разные параметры стратегии, чтобы понять, как они влияют на результаты торговли.

- Регулярная проверка: Используйте команду ```/status```, чтобы следить за своим балансом и открытыми позициями.

- Безопасность: Помните, что этот бот предназначен для симуляции торговли и обучения. Он не совершает реальные сделки на бирже.

